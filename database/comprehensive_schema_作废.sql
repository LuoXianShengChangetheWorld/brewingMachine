-- ============================================\n-- 智能售酒机平台完整数据库设计\n-- 基于实体类与现有SQL文件综合整理\n-- ============================================\n\n-- 创建数据库\nCREATE DATABASE IF NOT EXISTS brewing_machine DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\nUSE brewing_machine;\n\n-- ============================================\n-- 1. 用户相关表\n-- ============================================\n\n-- 用户表\nCREATE TABLE IF NOT EXISTS `user` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',\n    `username` VARCHAR(50) NOT NULL COMMENT '用户名',\n    `password` VARCHAR(255) NOT NULL COMMENT '密码(MD5)',\n    `nickname` VARCHAR(100) COMMENT '昵称',\n    `avatar` VARCHAR(500) COMMENT '头像URL',\n    `phone` VARCHAR(20) COMMENT '手机号',\n    `email` VARCHAR(100) COMMENT '邮箱',\n    `gender` TINYINT DEFAULT 0 COMMENT '性别：0-未知，1-男，2-女',\n    `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用，1-正常',\n    `role` VARCHAR(20) DEFAULT 'member' COMMENT '角色：member-会员，agent-代理商，merchant-商家',\n    `parent_user_id` BIGINT COMMENT '上级用户ID',\n    `balance` DECIMAL(10,2) DEFAULT 0.00 COMMENT '余额',\n    `frozen` DECIMAL(10,2) DEFAULT 0.00 COMMENT '冻结金额',\n    `points` INT DEFAULT 0 COMMENT '积分',\n    `total_recharge` DECIMAL(10,2) DEFAULT 0.00 COMMENT '累计充值',\n    `total_withdraw` DECIMAL(10,2) DEFAULT 0.00 COMMENT '累计提现',\n    `token` VARCHAR(255) COMMENT '登录token',\n    `token_expire_time` DATETIME COMMENT 'token过期时间',\n    `last_login_time` DATETIME COMMENT '最后登录时间',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_username` (`username`),\n    UNIQUE KEY `uk_phone` (`phone`),\n    INDEX `idx_parent_user_id` (`parent_user_id`),\n    INDEX `idx_status` (`status`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';\n\n-- 用户登录方式表\nCREATE TABLE IF NOT EXISTS `user_auth` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',\n    `user_id` BIGINT NOT NULL COMMENT '用户ID',\n    `type` VARCHAR(20) NOT NULL COMMENT '登录类型：wechat-微信，phone-手机号',\n    `access_key` VARCHAR(100) COMMENT '登录标识(微信openid或手机号)',\n    `secret_key` VARCHAR(255) COMMENT '登录密钥(微信unionid或手机验证码)',\n    `bind_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '绑定时间',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_user_type` (`user_id`, `type`),\n    INDEX `idx_access_key` (`access_key`),\n    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户登录方式表';\n\n-- 微信用户绑定表\nCREATE TABLE IF NOT EXISTS `wechat_user` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',\n    `openid` VARCHAR(64) NOT NULL COMMENT '微信OpenID',\n    `unionid` VARCHAR(64) COMMENT '微信UnionID',\n    `nickname` VARCHAR(200) COMMENT '昵称',\n    `avatar` VARCHAR(500) COMMENT '头像URL',\n    `gender` TINYINT COMMENT '性别：0-未知，1-男，2-女',\n    `city` VARCHAR(100) COMMENT '城市',\n    `province` VARCHAR(100) COMMENT '省份',\n    `country` VARCHAR(100) COMMENT '国家',\n    `language` VARCHAR(50) COMMENT '语言',\n    `user_id` BIGINT NOT NULL COMMENT '用户ID',\n    `bind_time` DATETIME COMMENT '绑定时间',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    INDEX `idx_openid` (`openid`),\n    INDEX `idx_unionid` (`unionid`),\n    INDEX `idx_user_id` (`user_id`),\n    UNIQUE KEY `uk_openid` (`openid`),\n    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='微信用户绑定表';\n\n-- 用户账户记录表\nCREATE TABLE IF NOT EXISTS `user_account_record` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',\n    `user_id` BIGINT NOT NULL COMMENT '用户ID',\n    `type` VARCHAR(20) NOT NULL COMMENT '记录类型：recharge-充值，withdraw-提现，consume-消费，refund-退款',\n    `amount` DECIMAL(10,2) NOT NULL COMMENT '金额',\n    `balance` DECIMAL(10,2) NOT NULL COMMENT '变动后余额',\n    `remark` VARCHAR(200) COMMENT '备注',\n    `order_id` VARCHAR(50) COMMENT '关联订单ID',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    INDEX `idx_user_id` (`user_id`),\n    INDEX `idx_type` (`type`),\n    INDEX `idx_create_time` (`create_time`),\n    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户账户记录表';\n\n-- ============================================\n-- 2. 店铺与设备相关表\n-- ============================================\n\n-- 店铺表\nCREATE TABLE IF NOT EXISTS `store` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '店铺ID',\n    `name` VARCHAR(100) NOT NULL COMMENT '店铺名称',\n    `address` VARCHAR(200) COMMENT '地址',\n    `latitude` DECIMAL(10,7) COMMENT '纬度',\n    `longitude` DECIMAL(10,7) COMMENT '经度',\n    `cover` VARCHAR(500) COMMENT '封面图片',\n    `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用，1-正常',\n    `owner_id` BIGINT COMMENT '店铺拥有者ID',\n    `agent_id` BIGINT COMMENT '代理商ID',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    INDEX `idx_owner_id` (`owner_id`),\n    INDEX `idx_agent_id` (`agent_id`),\n    INDEX `idx_status` (`status`),\n    FOREIGN KEY (`owner_id`) REFERENCES `user` (`id`) ON DELETE SET NULL,\n    FOREIGN KEY (`agent_id`) REFERENCES `user` (`id`) ON DELETE SET NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='店铺表';\n\n-- 设备表\nCREATE TABLE IF NOT EXISTS `device` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '设备ID',\n    `sn` VARCHAR(50) NOT NULL COMMENT '设备编号',\n    `name` VARCHAR(100) COMMENT '设备名称',\n    `store_id` BIGINT COMMENT '绑定店铺ID',\n    `online` TINYINT DEFAULT 0 COMMENT '在线状态：0-离线，1-在线',\n    `battery` TINYINT DEFAULT 100 COMMENT '电量百分比',\n    `status` VARCHAR(20) DEFAULT 'normal' COMMENT '设备状态：online-在线，offline-离线，fault-故障，lack-缺液，lack_el-缺电',\n    `last_heartbeat` DATETIME COMMENT '最后心跳时间',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_sn` (`sn`),\n    INDEX `idx_store_id` (`store_id`),\n    INDEX `idx_status` (`status`),\n    FOREIGN KEY (`store_id`) REFERENCES `store` (`id`) ON DELETE SET NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='设备表';\n\n-- 设备槽位表\nCREATE TABLE IF NOT EXISTS `device_slot` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '槽位ID',\n    `device_id` BIGINT NOT NULL COMMENT '设备ID',\n    `slot_id` VARCHAR(20) NOT NULL COMMENT '槽位编号',\n    `goods_id` BIGINT COMMENT '商品ID',\n    `price_id` BIGINT COMMENT '价格ID',\n    `capacity` INT COMMENT '容量(ml)',\n    `price` DECIMAL(8,2) COMMENT '当前价格',\n    `stock` INT DEFAULT 0 COMMENT '库存数量',\n    `locked` TINYINT DEFAULT 0 COMMENT '锁定状态：0-未锁定，1-已锁定',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_device_slot` (`device_id`, `slot_id`),\n    INDEX `idx_device_id` (`device_id`),\n    INDEX `idx_goods_id` (`goods_id`),\n    INDEX `idx_locked` (`locked`),\n    FOREIGN KEY (`device_id`) REFERENCES `device` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='设备槽位表';\n\n-- ============================================\n-- 3. 商品与分类相关表\n-- ============================================\n\n-- 商品分类表\nCREATE TABLE IF NOT EXISTS `category` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID',\n    `name` VARCHAR(50) NOT NULL COMMENT '分类名称',\n    `sort` INT DEFAULT 0 COMMENT '排序',\n    `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用，1-启用',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    INDEX `idx_sort` (`sort`),\n    INDEX `idx_status` (`status`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='商品分类表';\n\n-- 商品表\nCREATE TABLE IF NOT EXISTS `goods` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '商品ID',\n    `name` VARCHAR(100) NOT NULL COMMENT '商品名称',\n    `cover` VARCHAR(500) COMMENT '商品封面',\n    `description` TEXT COMMENT '商品描述',\n    `category_id` BIGINT COMMENT '分类ID',\n    `status` TINYINT DEFAULT 1 COMMENT '状态：0-下架，1-上架',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    INDEX `idx_category_id` (`category_id`),\n    INDEX `idx_status` (`status`),\n    FOREIGN KEY (`category_id`) REFERENCES `category` (`id`) ON DELETE SET NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='商品表';\n\n-- 商品规格价格表\nCREATE TABLE IF NOT EXISTS `goods_price` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '价格ID',\n    `goods_id` BIGINT NOT NULL COMMENT '商品ID',\n    `capacity` INT NOT NULL COMMENT '容量(ml)',\n    `price` DECIMAL(8,2) NOT NULL COMMENT '价格',\n    `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用，1-启用',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_goods_capacity` (`goods_id`, `capacity`),\n    INDEX `idx_goods_id` (`goods_id`),\n    FOREIGN KEY (`goods_id`) REFERENCES `goods` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='商品规格价格表';\n\n-- ============================================\n-- 4. 订单与支付相关表\n-- ============================================\n\n-- 订单表\nCREATE TABLE IF NOT EXISTS `order` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '订单ID',\n    `order_id` VARCHAR(50) NOT NULL COMMENT '订单编号',\n    `user_id` BIGINT NOT NULL COMMENT '用户ID',\n    `device_id` BIGINT NOT NULL COMMENT '设备ID',\n    `slot_id` BIGINT NOT NULL COMMENT '槽位ID',\n    `goods_id` BIGINT COMMENT '商品ID',\n    `goods_name` VARCHAR(100) COMMENT '商品名称',\n    `capacity` INT COMMENT '容量(ml)',\n    `price` DECIMAL(8,2) NOT NULL COMMENT '单价',\n    `quantity` INT DEFAULT 1 COMMENT '数量',\n    `total_amount` DECIMAL(8,2) NOT NULL COMMENT '总金额',\n    `coupon_id` BIGINT COMMENT '优惠券ID',\n    `coupon_amount` DECIMAL(8,2) DEFAULT 0.00 COMMENT '优惠券减免金额',\n    `pay_amount` DECIMAL(8,2) NOT NULL COMMENT '实际支付金额',\n    `pay_type` VARCHAR(20) COMMENT '支付方式：wechat-微信，alipay-支付宝，balance-余额',\n    `status` VARCHAR(20) DEFAULT 'pending' COMMENT '订单状态：pending-待支付，paid-已支付，completed-已完成，cancelled-已取消',\n    `pay_time` DATETIME COMMENT '支付时间',\n    `complete_time` DATETIME COMMENT '完成时间',\n    `refund_time` DATETIME COMMENT '退款时间',\n    `remark` VARCHAR(200) COMMENT '备注',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_order_id` (`order_id`),\n    INDEX `idx_user_id` (`user_id`),\n    INDEX `idx_device_id` (`device_id`),\n    INDEX `idx_status` (`status`),\n    INDEX `idx_create_time` (`create_time`),\n    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE RESTRICT,\n    FOREIGN KEY (`device_id`) REFERENCES `device` (`id`) ON DELETE RESTRICT,\n    FOREIGN KEY (`slot_id`) REFERENCES `device_slot` (`id`) ON DELETE RESTRICT\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='订单表';\n\n-- ============================================\n-- 5. 营销与活动相关表\n-- ============================================\n\n-- 优惠券表\nCREATE TABLE IF NOT EXISTS `coupon` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '优惠券ID',\n    `name` VARCHAR(100) NOT NULL COMMENT '优惠券名称',\n    `description` TEXT COMMENT '优惠券描述',\n    `type` VARCHAR(20) NOT NULL COMMENT '类型：PERCENTAGE-百分比，FIXED_AMOUNT-固定金额',\n    `value` DOUBLE NOT NULL COMMENT '优惠值',\n    `min_amount` DOUBLE DEFAULT 0.00 COMMENT '最低使用金额',\n    `max_discount` INT DEFAULT 0 COMMENT '最大折扣金额',\n    `total_count` INT NOT NULL COMMENT '总发放量',\n    `used_count` INT DEFAULT 0 COMMENT '已使用量',\n    `per_user_limit` INT DEFAULT 0 COMMENT '每人限领数量',\n    `start_time` DATETIME NOT NULL COMMENT '有效期开始',\n    `end_time` DATETIME NOT NULL COMMENT '有效期结束',\n    `status` VARCHAR(20) DEFAULT 'ACTIVE' COMMENT '状态：ACTIVE-有效，INACTIVE-无效',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    INDEX `idx_status` (`status`),\n    INDEX `idx_start_time` (`start_time`),\n    INDEX `idx_end_time` (`end_time`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='优惠券表';\n\n-- 用户优惠券表\nCREATE TABLE IF NOT EXISTS `user_coupon` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '用户优惠券ID',\n    `user_id` BIGINT NOT NULL COMMENT '用户ID',\n    `coupon_id` BIGINT NOT NULL COMMENT '优惠券ID',\n    `status` VARCHAR(20) DEFAULT 'AVAILABLE' COMMENT '状态：AVAILABLE-可用，USED-已使用，EXPIRED-已过期',\n    `receive_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '领取时间',\n    `use_time` DATETIME COMMENT '使用时间',\n    `expire_time` DATETIME COMMENT '过期时间',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_user_coupon` (`user_id`, `coupon_id`),\n    INDEX `idx_user_id` (`user_id`),\n    INDEX `idx_coupon_id` (`coupon_id`),\n    INDEX `idx_status` (`status`),\n    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE,\n    FOREIGN KEY (`coupon_id`) REFERENCES `coupon` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户优惠券表';\n\n-- 活动表\nCREATE TABLE IF NOT EXISTS `activity` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '活动ID',\n    `name` VARCHAR(100) NOT NULL COMMENT '活动名称',\n    `description` TEXT COMMENT '活动描述',\n    `type` VARCHAR(20) NOT NULL COMMENT '活动类型：DISCOUNT-折扣，FULL_REDUCTION-满减，GIFT-赠送，OTHER-其他',\n    `rule` JSON COMMENT '活动规则，JSON格式存储',\n    `start_time` DATETIME NOT NULL COMMENT '开始时间',\n    `end_time` DATETIME NOT NULL COMMENT '结束时间',\n    `status` VARCHAR(20) DEFAULT 'ACTIVE' COMMENT '状态：ACTIVE-有效，INACTIVE-无效',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    INDEX `idx_status` (`status`),\n    INDEX `idx_start_time` (`start_time`),\n    INDEX `idx_end_time` (`end_time`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='活动表';\n\n-- 二维码登录表\nCREATE TABLE IF NOT EXISTS `qr_code_login` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',\n    `qr_token` VARCHAR(64) UNIQUE NOT NULL COMMENT '二维码唯一标识',\n    `status` INT NOT NULL DEFAULT 0 COMMENT '状态：0-未扫描，1-已扫描未确认，2-已确认登录，3-已过期',\n    `user_id` BIGINT COMMENT '用户ID',\n    `user_info` TEXT COMMENT '用户信息（JSON格式）',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `expire_time` DATETIME NOT NULL COMMENT '过期时间',\n    `scan_time` DATETIME COMMENT '扫描时间',\n    `confirm_time` DATETIME COMMENT '确认时间',\n    INDEX `idx_qr_token` (`qr_token`),\n    INDEX `idx_status` (`status`),\n    INDEX `idx_expire_time` (`expire_time`),\n    INDEX `idx_user_id` (`user_id`),\n    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE SET NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='二维码登录表';\n\n-- ============================================\n-- 6. 系统辅助表\n-- ============================================\n\n-- 地区表\nCREATE TABLE IF NOT EXISTS `area` (\n    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '地区ID',\n    `name` VARCHAR(100) NOT NULL COMMENT '地区名称',\n    `code` VARCHAR(20) NOT NULL COMMENT '地区编码',\n    `parent_id` BIGINT COMMENT '父地区ID',\n    `level` INT NOT NULL COMMENT '地区级别：1-省，2-市，3-区/县',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_code` (`code`),\n    INDEX `idx_parent_id` (`parent_id`),\n    INDEX `idx_level` (`level`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='地区表';\n\n-- 地区级别枚举表\nCREATE TABLE IF NOT EXISTS `area_level` (\n    `id` INT PRIMARY KEY AUTO_INCREMENT COMMENT '级别ID',\n    `name` VARCHAR(50) NOT NULL COMMENT '级别名称',\n    `code` VARCHAR(20) NOT NULL COMMENT '级别编码',\n    `description` VARCHAR(200) COMMENT '级别描述',\n    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n    UNIQUE KEY `uk_code` (`code`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='地区级别枚举表';\n\n-- ============================================\n-- 初始化数据\n-- ============================================\n\n-- 初始化地区级别数据\nINSERT INTO `area_level` (`name`, `code`, `description`) VALUES\n('省级', 'PROVINCE', '省级行政区'),\n('市级', 'CITY', '市级行政区'),\n('区县级', 'DISTRICT', '区县级行政区');\n\n-- 初始化商品分类数据\nINSERT INTO `category` (`name`, `sort`, `status`) VALUES\n('红酒', 1, 1),\n('白酒', 2, 1),\n('啤酒', 3, 1),\n('洋酒', 4, 1),\n('黄酒', 5, 1);\n\n-- 初始化管理员用户\nINSERT INTO `user` (`username`, `password`, `nickname`, `status`, `role`) VALUES\n('admin', '21232f297a57a5a743894a0e4a801fc3', '系统管理员', 1, 'admin');\n