# 智能售酒机平台功能模块梳理

基于思维导图整理的系统功能模块和业务需求。

## 一、用户角色体系

### 1.1 角色类型
- **代理商** - 可以开代理，设置分成比例，管理下级代理
- **商家** - 管理店铺，设置分成，发放酒券和红包
- **供应商** - 提供酒水，设置酒金价格和分成
- **运营人员** - 包括运维员、业务员等，管理设备和推广
- **机主** - 设备拥有者，获得设备销售分成
- **推广员** - 推广用户和商家，获得消费分成
- **消费者** - 普通用户，购买酒水，使用券和红包

### 1.2 角色层级关系
- 代理商可以开多级代理（省代、市代、区代等）
- 每个角色都有对应的分成比例设置
- 分成采用层级扣除方式，上级设置的百分比从下级收入中扣除

## 二、核心功能模块

### 2.1 代理商管理
**功能点：**
- 搜索代理商
- 查看代理数量及名称
- 查看各代理商的日/月/年总流水
- 编辑代理商信息（仅名称和密码）
- 添加代理：设置分成百分比
- 生成二维码开代理（先设置百分比，再生成二维码）
- 转让设备：
  - 方式1：仅转设备，其他分配权不变
  - 方式2：全部转让，所有信息解绑重置
- 查看总营业额和总分成
- 分成明细（日/月/年）

**业务规则：**
- 代理可开代理，每级扣除自己的百分比
- 最后一级扣除所有要分出去的，余下的就是自己的
- 二维码成为代理商流程：小程序扫一扫 → 确认授权 → 加入

### 2.2 商家管理
**功能点：**
- 搜索商家
- 添加商家：设置分成比例
- 查看商家数量和信息
- 商家位置管理
- 转让解绑设备
- 销售总计统计
- 编辑商家信息（分成及各种信息）
- 删除商家

**商家相关设置：**
- 消费者扫码支付菜金或平台点菜核销支付后送消费者酒券比例设置
  - 可设置券的使用期限和可用场景（本店使用/通用/仅酒券）
- 每款菜品上传后核销支付后送消费者酒券比例设置（每款菜单独设置）
- 酒机流水分成（自然客户扫酒机现金支付用户）
- 给商家分成：
  - 贡献分成按规则平台设置
  - 每天领红包
- 商家红包总额修改（需上级授权）
- 商家给他店消费者红包功能开关
- 商家可发行抵扣券总额和数量设置

### 2.3 店铺管理
**功能点：**
- 选择商家
- 填写店铺信息：
  - 店铺名称、订餐电话
  - 门头照、店内照（最多5张）
  - 营业时间、停业时间
  - 店铺城市、商户地址（地图定位）、详细地址
  - 商家折扣比例
  - 消费赠送礼金比例
  - 消费者红包额度百分比（支付时总额的百分比扣留进池）
  - 店铺新人红包（红包额度1-10随机，商家可自行修改）
  - 生成红包充值码（每个商家独立充值到对应商家红包池）
  - 选择商户（现金在酒机支付要给商家分成）
  - 店铺分类（如美食餐饮）
  - 店铺提供员选择（介绍这个店的人要拿这个店在平台的分成）
  - 自定义角色选择（如有别的角色需拿这家店的分成）
  - 店铺介绍（0-500字）

### 2.4 设备管理
**功能点：**
- 设备绑定：扫机子上的二维码绑定，同时绑定层级关系网及分配分成
- 解绑设备：解绑后所有信息没有，可重绑
- 按城市/区县/片区显示
- 设备信息查看

**设备配置：**
- 6个出酒口，每个口对应的酒不同，机子可以独立设置
- 出酒口设置：
  - 选择已设置好的酒套餐
  - 每个口酒水的ML量
  - 可修改每个口的选择（酒的品类）
  - 可设置某个口或六个口免费喝模式
  - 可设置某个口的状态（开可用/关停用）
  - 手动开/关启出酒模式（需最高级往下授权）
- 详情：
  - 开锁/关锁
  - 设备换酒次数、修改酒数量等记录（带上换酒人ID）
  - 本机二维码（如有变动此码要跟着变）
  - 本机销量统计（细分到用那种钱消费的）
  - 运维记录（开锁次数、开销人ID等）
  - 流量卡流量显示、充值提示（对接三方卡方）
  - 设备状态（在线/离线上报提示）

**设备状态管理：**
- 补货管理：需补货设备信息，可按省市区县显示，上报+语音提示
- 缺电设备：设备信息，可按省市区县显示，上报+语音提示
- 故障设备：故障信息上报，故障台数（按城市片区统计），具体故障描述（设备号及几号出酒口泵或按钮不工作）
- 离线设备：离线台数，离线前电量上报，位置设置（可按省市区县显示）

### 2.5 供应商管理
**功能点：**
- 搜索供应商
- 供应商数量和信息查看
- 酒金个当前价明细（酒金逻辑根据销售量，如售出1000ml给10个，也可手动调设置）
- 单款酒水分润设置：
  - 选择酒类
  - 编辑：选择设备（销量、设备编号、详情）、选出酒口

### 2.6 运营人员管理
**功能点：**
- 运维员管理：
  - 搜索
  - 添加运维员（设置信息及分成）
  - 运维人数、信息查看
  - 运维设备数量
  - 编辑
- 业务员管理：功能同上

### 2.7 角色设置与分成机制
**功能点：**
- 设置角色及角色的分成
- 最高分红到多少结束（可手动修改）
- 生成对应角色的二维码（要成为这个角色，进入小程序扫一扫功能授权完成）
- 注：二维码一个只用一次，每个二维码都是独立的，同角色生成的二维码不同不重复

### 2.8 机主管理
**功能点：**
- 机主分一台多台机的机主或某台机某个出酒口的机主
- 需置分成比例到最大金额就停止，需再分由相关角色设置
- 机子数量
- 酒金个当前价明细
- 位置信息
- 日月年收入明细
- 提现
- 机子上酒水销售明细
- 购买酒水记录

### 2.9 推广员管理
**功能点：**
- 推广员介绍饭店入驻，饭店的营业额抽成
  - 这个饭店折扣后的提成及酒机上的出金支付提成
- 推荐用户去任何有合作的饭店或酒机上消费了有提成（前提是没有被他人绑定的用户）
- 成为推广员可以设置有门槛/无门槛（如一次购买指定的产品或者消费达***金额）
- 设置分成模式：
  - 饭店消费提成
  - 酒机上消费提成
  - 充值提成
  - 购买酒机提成
  - 被绑定者消费提成
- 推广员信息显示：推广的人数、营业额（日月年）、有消费用户数量、未消费人数信息数量
- 编辑（修改信息等）
- 酒金逻辑：是他链关系的营业额（有折扣的按折扣后的营业）100就加他一个，要可以手动设置个数比例

### 2.10 酒类管理
**功能点：**
- 搜索（搜索功能省市区县）
- 添加不同品牌酒信息及单价、出酒时间、出酒量、规格、套餐等
  - 如红酒、浓香、酱香、清香、洋酒等品类
- 点查看：查看酒的信息、存量、销量
- 编辑酒类的信息

### 2.11 类型管理
**功能点：**
- 酒品类管理
- 编辑
- 添加品类

### 2.12 场地管理
**功能点：**
- 每个运营管理者名下有的设备位置等
- 卡号绑设置号+所在地

### 2.13 流量卡管理
**功能点：**
- 搜索
- 已到期提醒
- 流量到期：充值（充值金额可设置修改）
- 绑定设备（扫机子上的二维码就绑在名下，同时这台机也自动绑定层级关系网及分配分成）
  - 所有的分成都是按商家让利后的百分比分
  - 设备绑时选这台机需分成的角色：如机主、供应商（每台机有六款酒就可以绑定6个不同供应商）、推广员、业务员、运营员、省代、市代、区代、社区代
- 解绑设备（解绑后就所有信息没有了，这台机就可以重绑）
- 按城市显示（按区县、按片区）
- 设备信息

### 2.14 首页数据统计
**功能点：**
- 订单金额总计（日/月/年）
- 积分购买（日/月/年）
- 折扣券购买（日/月/年）
- 酒金明细（日/月/年）
- 礼金购买（日/月/年）
- 余额购买（日/月/年）
- 我的分成（日/月/年）
- 充值统计（日/月/年）
- 今日统计
- 数量统计
- 收益日月统计曲线图

### 2.15 提现功能
**功能点：**
- 提现（对接三方支付如付呗）：
  - 提现到银行卡/支付宝/微信
  - 提现额
  - 输入金额：
    - 提现（提现成功/不成功需返回金额）
    - 提现扣手续费
- 提现记录

### 2.16 我的（个人中心）
**功能点：**
- 销售订单：酒类、餐饮类
- 充值订单：信息
- 分成明细：酒类、餐饮类、平台分红
- 礼金提成明细
- 酒金个当前价会涨（这个由平台定规则）
- 积分提成明细
- 设备销售提成明细
- 业务推广提成明细
- 套餐提成明细
- 销售统计
- 红包明细
- 切换用户端

### 2.17 促销活动
**功能点：**
- 活动设置：例如券的发放，券使用数字便于在支付时抵扣
- 充值设置
- VIP卡设置：
  - 可设置月卡、季卡、年卡
  - 不同卡种在售酒机上现金支付或扫码支付时，折扣不同
  - 推广者推广有分佣比例
- 新户送券：注册就送***
- 免费喝：免费喝酒数量设置

### 2.18 红包设置
**功能点：**
- 商家红包设置：每个商家领的红包不同，根据营业额的累计
- 角色红包设置：每个人（按角色区分）领的红包不同，根据其所负责关系链的累计营业额
- 消费者红包设置：每个消费者领的红包不同，根据其累计消费额

### 2.19 其他功能
**功能点：**
- 抽奖活动：大转盘抽奖、盲盒等
- 奖品规则设置
- 广告管理：
  - 轮播广告
  - 弹窗广告
  - 可对接三方广告及结算（对接的三方用户点广告看视频有分成）
- 装机测试（此功能由平台给权限）：
  - 选择出酒口1、2、3、4、5、6
    - 一键出酒
    - 结束出酒
  - 开锁（确定开锁）
  - 关锁（确定关锁）

## 三、核心业务规则

### 3.1 分成体系
- **层级分成**：上级设置百分比从下级收入中扣除
- **商家让利后分成**：所有分成都是按商家让利后的百分比分
- **多种分成来源**：
  - 酒机流水
  - 饭店消费
  - 充值
  - 购买酒机
  - 被绑定者消费
- **分成明细**：支持日/月/年统计

### 3.2 二维码授权机制
- 二维码用于角色授权（代理商、商家、推广员等）
- 每个二维码只用一次
- 每个二维码都是独立的，不重复
- 生成二维码前需先设置相关配置（如代理的百分比）

### 3.3 设备绑定机制
- 扫设备二维码绑定
- 绑定同时建立层级关系网
- 设备绑定时可选择需要分成的角色
- 解绑后所有信息清除，可重绑

### 3.4 酒券和红包机制
- 支付后送酒券（可设置比例、期限、使用场景）
- 红包池机制（商家红包池、角色红包池、消费者红包）
- 红包额度根据累计营业额/消费额计算
- 支持红包充值码

### 3.5 支付方式
- 现金支付（酒机上）
- 扫码支付
- 余额支付
- 积分支付
- 折扣券支付
- 礼金支付
- 酒金支付

## 四、数据统计需求

### 4.1 时间维度
- 日统计
- 月统计
- 年统计

### 4.2 统计维度
- 订单金额
- 各种支付方式统计
- 分成统计
- 充值统计
- 销售统计
- 用户数量统计
- 设备状态统计

### 4.3 曲线图
- 收益日月统计曲线图

