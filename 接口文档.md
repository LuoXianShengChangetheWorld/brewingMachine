# 售玖机小程序接口文档

## 一、概述

本文档描述售玖机微信小程序所有后端API接口。

### 1.1 接口基础信息

| 属性 | 值 |
|------|-----|
| 协议 | HTTPS |
| 编码 | UTF-8 |
| 格式 | JSON |
| 鉴权 | Bearer Token (Header: `Authorization: Bearer <token>`) |

### 1.2 基础URL

项目根据不同业务模块使用三个API域：

```javascript
// 用户端API (api)
https://jj-member.baozhuangcn.com  // 玖等
https://jsj-member.baozhuangcn.com // 玖升记
https://jycx1-member.baozhuangcn.com // 酒友诚信
https://xgml-member.baozhuangcn.com // 小柜美酒
https://py-member.baozhuangcn.com // 平价购酒
https://zl9-member.baozhuangcn.com // 至粮9号
https://hxh-member.baozhuangcn.com // 豪享购

// 代理商/运营端API (agent_api)
https://jj-agent.baozhuangcn.com
https://jsj-agent.baozhuangcn.com
https://jycx-agent.baozhuangcn.com
https://xgml-agent.baozhuangcn.com
https://py-agent.baozhuangcn.com
https://zl9-agent.baozhuangcn.com
https://hxh-agent.baozhuangcn.com

// 商家端API (mar_api)
https://jj-merchant.baozhuangcn.com
https://jsj-merchant.baozhuangcn.com
https://jycx-merchant.baozhuangcn.com
https://xgml-merchant.baozhuangcn.com
https://py-merchant.baozhuangcn.com
https://zl9-merchant.baozhuangcn.com
https://hxh-merchant.baozhuangcn.com
```

### 1.3 响应格式

**成功响应：**
```json
{
  "code": 200,
  "msg": "success",
  "data": { ... }
}
```

**失败响应：**
```json
{
  "code": 400,
  "msg": "错误信息",
  "data": null
}
```

---

## 二、认证模块 (Account)

### 2.1 登录接口

#### 2.1.1 微信快捷登录
```http
POST /apis/login/wx/app
```
**说明**：用户通过微信授权码登录

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| code | String | 是 | 微信授权码 |

**响应示例**：
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userInfo": {
      "id": "10001",
      "nickName": "用户昵称",
      "avatar": "https://xxx.com/avatar.png"
    }
  }
}
```

#### 2.1.2 获取授权码
```http
POST /apis/login/accessCode/gen
```
**说明**：获取社交快捷登录授权码

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| accessToken | String | 是 | 社交平台AccessToken |
| openid | String | 是 | 社交平台OpenID |

#### 2.1.3 社交快捷登录
```http
POST /apis/login/accessCode
```
**说明**：使用授权码进行社交快捷登录

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| accessCode | String | 是 | 授权码 |

#### 2.1.4 基础账号登录
```http
POST /apis/login/basic
```
**说明**：使用用户名密码登录

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| username | String | 是 | 用户名 |
| password | String | 是 | 密码（MD5加密） |

#### 2.1.5 商家登录
```http
POST /apis/login/basic (mar_api)
```
**说明**：商家端登录

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| username | String | 是 | 用户名 |
| password | String | 是 | 密码 |

#### 2.1.6 代理商登录
```http
POST /apis/login/basic (agent_api)
```
**说明**：代理商端登录

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| username | String | 是 | 用户名 |
| password | String | 是 | 密码 |

---

### 2.2 用户信息接口

#### 2.2.1 获取用户信息
```http
POST /apis/user/info
```
**说明**：获取当前登录用户信息

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "id": "10001",
    "nickName": "昵称",
    "avatar": "https://xxx.com/avatar.png",
    "phone": "13800138000",
    "balance": 100.00,
    "integral": 500
  }
}
```

#### 2.2.2 获取代理商用户信息
```http
POST /apis/user/info (agent_api)
```
**说明**：获取代理商用户信息

#### 2.2.3 修改用户信息
```http
POST /apis/user/info/set
```
**说明**：修改当前用户信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| nickName | String | 否 | 昵称 |
| avatar | String | 否 | 头像URL |

#### 2.2.4 修改头像
```http
POST /apis/user/avatar/set
```
**说明**：修改用户头像

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| avatar | String | 是 | 头像URL |

#### 2.2.5 绑定手机号
```http
POST /apis/user/phone/set
```
**说明**：绑定用户手机号

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| phone | String | 是 | 手机号 |
| code | String | 是 | 验证码 |

#### 2.2.6 修改密码
```http
POST /apis/user/password/set
```
**说明**：修改用户密码

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| oldPassword | String | 是 | 旧密码（MD5） |
| newPassword | String | 是 | 新密码（MD5） |

#### 2.2.7 绑定上级关系
```http
POST /apis/user/member/referrer/bind
```
**说明**：绑定推荐人关系（仅在没有上级时生效）

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| referrerId | String | 是 | 推荐人ID |

---

### 2.3 登录方式管理

#### 2.3.1 获取登录方式列表
```http
POST /apis/user/auth/list
```
**说明**：获取用户已绑定的登录方式列表

**响应示例**：
```json
{
  "code": 200,
  "data": [
    {
      "type": "wechat",
      "openid": "wx_xxx",
      "bindTime": "2024-01-01 12:00:00"
    },
    {
      "type": "phone",
      "phone": "138****0000",
      "bindTime": "2024-01-01 12:00:00"
    }
  ]
}
```

#### 2.3.2 添加登录方式
```http
POST /apis/user/auth/add
```
**说明**：添加新的登录方式

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | String | 是 | 登录类型（wechat/phone） |
| code | String | 是 | 授权码或验证码 |

#### 2.3.3 删除登录方式
```http
POST /apis/user/auth/del
```
**说明**：删除已绑定的登录方式

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | String | 是 | 登录类型 |

#### 2.3.4 检查用户名
```http
POST /apis/user/auth/accessKey/check
```
**说明**：检查用户名是否可用

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| accessKey | String | 是 | 用户名 |

---

### 2.4 账户资金接口

#### 2.4.1 获取账户信息
```http
POST /apis/user/account/list
```
**说明**：获取用户账户信息

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "balance": 1000.00,
    "frozen": 100.00,
    "totalRecharge": 5000.00,
    "totalWithdraw": 2000.00
  }
}
```

#### 2.4.2 账户记录列表
```http
POST /apis/user/account/record/list
```
**说明**：获取用户账户变动记录

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码，默认1 |
| size | Number | 否 | 每页条数，默认10 |
| type | String | 否 | 记录类型 |

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": "1",
        "type": "recharge",
        "amount": 100.00,
        "balance": 1000.00,
        "createTime": "2024-01-01 12:00:00",
        "remark": "充值"
      }
    ],
    "total": 100,
    "page": 1,
    "size": 10
  }
}
```

#### 2.4.3 用户提现
```http
POST /apis/user/transfer/out
```
**说明**：用户申请提现

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| amount | Number | 是 | 提现金额 |
| bankCardId | String | 是 | 银行卡ID |

#### 2.4.4 用户充值
```http
POST /apis/user/transfer/in
```
**说明**：用户充值

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| amount | Number | 是 | 充值金额 |
| payType | String | 是 | 支付方式（wechat/alipay） |

---

## 三、设备模块 (Device)

### 3.1 设备信息接口

#### 3.1.1 获取设备详情
```http
POST /apis/device/info
```
**说明**：根据设备号获取设备详情

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "sn": "DEV001",
    "name": "售玖机01",
    "online": true,
    "battery": 85,
    "address": "XX市XX区XX路XX号",
    "storeId": "10001",
    "slots": [
      {
        "id": "1",
        "goodsName": "白酒",
        "capacity": 500,
        "price": 29.9,
        "stock": 10
      }
    ]
  }
}
```

#### 3.1.2 设备列表
```http
POST /apis/device/list (agent_api)
```
**说明**：获取设备列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| status | String | 否 | 设备状态 |
| keyword | String | 否 | 搜索关键词 |

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "sn": "DEV001",
        "name": "设备名称",
        "online": true,
        "battery": 85,
        "storeName": "店铺名",
        "createTime": "2024-01-01"
      }
    ],
    "total": 50,
    "page": 1,
    "size": 10
  }
}
```

#### 3.1.3 修改设备
```http
POST /apis/device/set (agent_api)
```
**说明**：修改设备信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |
| name | String | 否 | 设备名称 |
| storeId | String | 否 | 绑定店铺ID |

---

### 3.2 设备绑定接口

#### 3.2.1 绑定设备
```http
POST /apis/device/bind (agent_api)
```
**说明**：将设备绑定到店铺

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |
| storeId | String | 是 | 店铺ID |

#### 3.2.2 解除绑定设备
```http
POST /apis/device/Unbind (agent_api)
```
**说明**：解除设备与店铺的绑定

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |

---

### 3.3 设备槽位接口

#### 3.3.1 获取槽位列表
```http
POST /apis/device/slot/list (agent_api)
```
**说明**：获取设备槽位配置列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |

#### 3.3.2 修改槽位设置
```http
POST /apis/device/slot/set (agent_api)
```
**说明**：修改设备槽位配置

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |
| slotId | String | 是 | 槽位ID |
| goodsId | String | 否 | 商品ID |
| price | Number | 否 | 价格 |

#### 3.3.3 槽位分组
```http
POST /apis/device/slot/group/dim (agent_api)
```
**说明**：获取设备槽位分组下拉数据

#### 3.3.4 锁定槽位
```http
POST /apis/device/slot/lock (agent_api)
```
**说明**：锁定设备槽位

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |
| slotId | String | 是 | 槽位ID |

#### 3.3.5 解锁槽位
```http
POST /apis/device/slot/unlock (agent_api)
```
**说明**：解锁设备槽位

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |
| slotId | String | 是 | 槽位ID |

---

### 3.4 商品管理接口

#### 3.4.1 商品列表
```http
POST /apis/device/goods/list (agent_api)
```
**说明**：获取设备商品列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| keyword | String | 否 | 搜索关键词 |

#### 3.4.2 添加商品
```http
POST /apis/device/goods/add (agent_api)
```
**说明**：添加设备商品

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 商品名称 |
| cover | String | 是 | 商品封面 |
| spec | Array | 是 | 规格数组 |
| price | Number | 是 | 价格 |

#### 3.4.3 修改商品
```http
POST /apis/device/goods/set (agent_api)
```
**说明**：修改商品信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 商品ID |
| name | String | 否 | 商品名称 |
| cover | String | 否 | 封面URL |
| spec | Array | 否 | 规格 |

#### 3.4.4 删除商品
```http
POST /apis/device/goods/del (agent_api)
```
**说明**：删除商品

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 商品ID |

---

### 3.5 商品价格接口

#### 3.5.1 价格列表
```http
POST /apis/device/goods/price/list (agent_api)
```
**说明**：获取商品价格列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| goodsId | String | 是 | 商品ID |

#### 3.5.2 价格组下拉
```http
POST /apis/device/goods/price/group/dim (agent_api)
```
**说明**：获取价格组下拉数据

#### 3.5.3 添加价格
```http
POST /apis/device/goods/price/add (agent_api)
```
**说明**：添加商品价格

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| goodsId | String | 是 | 商品ID |
| capacity | Number | 是 | 容量(ml) |
| price | Number | 是 | 价格 |

#### 3.5.4 修改价格
```http
POST /apis/device/goods/price/set (agent_api)
```
**说明**：修改商品价格

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 价格ID |
| price | Number | 是 | 新价格 |

#### 3.5.5 删除价格
```http
POST /apis/device/goods/price/del (agent_api)
```
**说明**：删除商品价格

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 价格ID |

---

### 3.6 订单接口

#### 3.6.1 创建设备订单
```http
POST /apis/device/order/create
```
**说明**：生成设备购买订单并获取支付信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| sn | String | 是 | 设备编号 |
| slotId | String | 是 | 槽位ID |
| priceId | String | 是 | 价格ID |
| couponId | String | 否 | 优惠券ID |

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "orderId": "ORD202401010001",
    "payInfo": {
      "appId": "wx...",
      "timeStamp": "1704067200",
      "nonceStr": "abc123",
      "package": "prepay_id=wx20240101...",
      "signType": "RSA",
      "paySign": "..."
    }
  }
}
```

#### 3.6.2 查询订单状态
```http
POST /apis/device/order/status
```
**说明**：查询订单支付状态

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| orderId | String | 是 | 订单ID |

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "orderId": "ORD202401010001",
    "status": "paid", // pending/paid/completed/cancelled
    "payTime": "2024-01-01 12:00:00"
  }
}
```

#### 3.6.3 订单详情
```http
POST /apis/device/order/get
```
**说明**：获取订单详情

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| orderId | String | 是 | 订单ID |

#### 3.6.4 我的订单列表
```http
POST /apis/device/order/list
```
**说明**：获取当前用户的设备订单列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| status | String | 否 | 订单状态 |

#### 3.6.5 代理订单列表
```http
POST /apis/device/order/list (agent_api)
```
**说明**：获取代理下所有设备订单

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| storeId | String | 否 | 店铺ID |
| status | String | 否 | 订单状态 |
| startTime | String | 否 | 开始时间 |
| endTime | String | 否 | 结束时间 |

---

### 3.7 店铺相关

#### 3.7.1 获取店铺详情
```http
POST /apis/store/get
```
**说明**：根据ID获取店铺详情

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 店铺ID |

#### 3.7.2 店铺列表
```http
POST /apis/store/list
```
**说明**：获取店铺列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| latitude | Number | 否 | 纬度 |
| longitude | Number | 否 | 经度 |
| keyword | String | 否 | 搜索关键词 |

---

### 3.8 活动接口

#### 3.8.1 优惠券列表
```http
POST /apis/activity/coupon/list
```
**说明**：获取优惠券列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| status | String | 否 | 状态 |

#### 3.8.2 活动配置
```http
POST /apis/activity/gift/config
```
**说明**：获取充值送礼活动配置

#### 3.8.3 创建充值送礼订单
```http
POST /apis/activity/gift/create
```
**说明**：创建充值送礼活动订单

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| amount | Number | 是 | 充值金额 |
| activityId | String | 是 | 活动ID |

---

## 四、店铺管理模块 (Store)

### 4.1 店铺管理

#### 4.1.1 店铺列表
```http
POST /apis/store/list (mar_api)
```
**说明**：商家获取店铺列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| keyword | String | 否 | 搜索关键词 |

#### 4.1.2 店铺详情
```http
POST /apis/store/get (mar_api)
```
**说明**：获取店铺详情

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 店铺ID |

#### 4.1.3 修改店铺
```http
POST /apis/store/set (mar_api)
```
**说明**：修改店铺信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 店铺ID |
| name | String | 否 | 店铺名称 |
| address | String | 否 | 地址 |
| cover | String | 否 | 封面 |

#### 4.1.4 添加店铺
```http
POST /apis/store/add (agent_api)
```
**说明**：创建新店铺

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 店铺名称 |
| address | String | 是 | 地址 |
| latitude | Number | 是 | 纬度 |
| longitude | Number | 是 | 经度 |

#### 4.1.5 删除店铺
```http
POST /apis/store/del (agent_api)
```
**说明**：删除店铺

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 店铺ID |

#### 4.1.6 店铺下拉数据
```http
POST /apis/store/dim (agent_api)
```
**说明**：获取店铺下拉选择数据

---

### 4.2 分类管理

#### 4.2.1 分类列表
```http
POST /apis/store/category/list (mar_api)
```
**说明**：获取店铺商品分类列表

#### 4.2.2 添加分类
```http
POST /apis/store/category/add (mar_api)
```
**说明**：添加商品分类

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 分类名称 |
| sort | Number | 否 | 排序 |

#### 4.2.3 修改分类
```http
POST /apis/store/category/set (mar_api)
```
**说明**：修改分类信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 分类ID |
| name | String | 否 | 分类名称 |
| sort | Number | 否 | 排序 |

#### 4.2.4 删除分类
```http
POST /apis/store/category/del (mar_api)
```
**说明**：删除分类

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 分类ID |

#### 4.2.5 分类下拉数据
```http
POST /apis/store/category/dim (mar_api)
```
**说明**：获取分类下拉数据

#### 4.2.6 店铺分类枚举
```http
POST /apis/sys/enum (mar_api)
```
**说明**：获取系统分类枚举

---

### 4.3 商品管理

#### 4.3.1 商品列表
```http
POST /apis/store/goods/list (mar_api)
```
**说明**：获取店铺商品列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| categoryId | String | 否 | 分类ID |
| keyword | String | 否 | 搜索关键词 |

#### 4.3.2 添加商品
```http
POST /apis/store/goods/add (mar_api)
```
**说明**：添加店铺商品

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 商品名称 |
| categoryId | String | 是 | 分类ID |
| price | Number | 是 | 价格 |
| cover | String | 是 | 封面图 |
| description | String | 否 | 商品描述 |

#### 4.3.3 修改商品
```http
POST /apis/store/goods/set (mar_api)
```
**说明**：修改商品信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 商品ID |
| name | String | 否 | 商品名称 |
| price | Number | 否 | 价格 |
| cover | String | 否 | 封面 |

#### 4.3.4 删除商品
```http
POST /apis/store/goods/del (mar_api)
```
**说明**：删除商品

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 商品ID |

#### 4.3.5 商品下拉数据
```http
POST /apis/store/goods/dim (agent_api)
```
**说明**：获取商品下拉数据

---

### 4.4 位置管理

#### 4.4.1 位置列表
```http
POST /apis/store/seat/list (mar_api)
```
**说明**：获取店铺位置列表

#### 4.4.2 添加位置
```http
POST /apis/store/seat/add (mar_api)
```
**说明**：添加店铺位置

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 位置名称 |
| address | String | 是 | 位置地址 |

#### 4.4.3 修改位置
```http
POST /apis/store/seat/set (mar_api)
```
**说明**：修改位置信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 位置ID |
| name | String | 否 | 位置名称 |

#### 4.4.4 删除位置
```http
POST /apis/store/seat/del (mar_api)
```
**说明**：删除位置

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 位置ID |

---

### 4.5 订单管理

#### 4.5.1 商城订单列表
```http
POST /apis/store/order/list (mar_api)
```
**说明**：获取商城订单列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| status | String | 否 | 订单状态 |

#### 4.5.2 订单核销
```http
POST /apis/store/order/sure (mar_api)
```
**说明**：核销商城订单

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| orderId | String | 是 | 订单ID |

#### 4.5.3 完成结算
```http
POST /apis/store/order/completed (mar_api)
```
**说明**：订单完成结算

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| orderId | String | 是 | 订单ID |

---

### 4.6 收银订单

#### 4.6.1 创建收银订单
```http
POST /apis/store/cashier/create
```
**说明**：创建收银订单

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| storeId | String | 是 | 店铺ID |
| amount | Number | 是 | 金额 |
| goodsList | Array | 是 | 商品列表 |

#### 4.6.2 收银订单列表
```http
POST /apis/store/cashier/list (mar_api)
```
**说明**：获取收银订单列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| status | String | 否 | 订单状态 |

---

## 五、用户模块 (Users)

### 5.1 推广模块

#### 5.1.1 推广人员列表
```http
POST /apis/report/member/list
```
**说明**：获取推广人员列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |

---

### 5.2 社区模块

#### 5.2.1 合作加盟
```http
POST /apis/forum/stick/join
```
**说明**：提交合作加盟申请

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 姓名 |
| phone | String | 是 | 联系电话 |
| content | String | 是 | 申请内容 |

#### 5.2.2 意见反馈
```http
POST /apis/forum/stick/feedback
```
**说明**：提交意见反馈

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| content | String | 是 | 反馈内容 |
| images | Array | 否 | 图片列表 |

#### 5.2.3 常见问题
```http
POST /apis/forum/stick/faq
```
**说明**：获取常见问题列表

---

### 5.3 授权模块

#### 5.3.1 确认授权
```http
POST /apis/user/relation/auth
```
**说明**：确认授权请求

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| relationId | String | 是 | 授权关系ID |
| status | String | 是 | 状态（agree/reject） |

#### 5.3.2 创建授权请求
```http
POST /apis/user/relation/create (agent_api)
```
**说明**：创建授权请求

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| userId | String | 是 | 被授权用户ID |

#### 5.3.3 查询授权用户
```http
POST /apis/user/relation/dim
```
**说明**：查询可授权用户

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| keyword | String | 否 | 搜索关键词 |

---

## 六、运营管理模块 (Agent)

### 6.1 代理商管理

#### 6.1.1 我的代理商列表
```http
POST /apis/user/agent/list (agent_api)
```
**说明**：获取代理商列表

#### 6.1.2 修改代理商
```http
POST /apis/user/agent/set (agent_api)
```
**说明**：修改代理商信息

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 代理商ID |
| name | String | 否 | 名称 |
| phone | String | 否 | 电话 |

---

### 6.2 商家管理

#### 6.2.1 我的商家列表
```http
POST /apis/user/merchant/list (agent_api)
```
**说明**：获取商家列表

#### 6.2.2 修改商家
```http
POST /apis/user/merchant/set (agent_api)
```
**说明**：修改商家信息

---

### 6.3 推销员管理

#### 6.3.1 推销员列表
```http
POST /apis/user/salesman/list (agent_api)
```
**说明**：获取推销员列表

#### 6.3.2 修改推销员
```http
POST /apis/user/salesman/set (agent_api)
```
**说明**：修改推销员信息

---

### 6.4 业务员管理

#### 6.4.1 业务员列表
```http
POST /apis/user/staff/list (agent_api)
```
**说明**：获取业务员列表

#### 6.4.2 修改业务员
```http
POST /apis/user/staff/set (agent_api)
```
**说明**：修改业务员信息

---

### 6.5 机主管理

#### 6.5.1 机主列表
```http
POST /apis/user/maintainer/list (agent_api)
```
**说明**：获取机主列表

#### 6.5.2 修改机主
```http
POST /apis/user/maintainer/set (agent_api)
```
**说明**：修改机主信息

---

### 6.6 供应链管理

#### 6.6.1 供应链列表
```http
POST /apis/user/supplier/list (agent_api)
```
**说明**：获取供应链列表

#### 6.6.2 修改供应链
```http
POST /apis/user/supplier/set (agent_api)
```
**说明**：修改供应链信息

---

### 6.7 订单管理

#### 6.7.1 商城订单列表
```http
POST /apis/store/order/list (agent_api)
```
**说明**：获取商城订单列表

---

## 七、活动模块 (Activity)

### 7.1 返利管理

#### 7.1.1 返利组列表
```http
POST /apis/activity/rebate/group/list (agent_api)
```
**说明**：获取返利组列表

#### 7.1.2 添加返利组
```http
POST /apis/activity/rebate/group/add (agent_api)
```
**说明**：添加返利组

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | String | 是 | 返利组名称 |
| rebatePercent | Number | 是 | 返利比例 |

#### 7.1.3 修改返利组
```http
POST /apis/activity/rebate/group/set (agent_api)
```
**说明**：修改返利组

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 返利组ID |
| name | String | 否 | 名称 |
| rebatePercent | Number | 否 | 返利比例 |

#### 7.1.4 删除返利组
```http
POST /apis/activity/rebate/group/del (agent_api)
```
**说明**：删除返利组

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 返利组ID |

#### 7.1.5 返利组下拉
```http
POST /apis/activity/rebate/group/dim (agent_api)
```
**说明**：获取返利组下拉数据

---

### 7.2 返利用户管理

#### 7.2.1 返利用户列表
```http
POST /apis/activity/rebate/user/list (agent_api)
```
**说明**：获取返利用户列表

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| page | Number | 否 | 页码 |
| size | Number | 否 | 每页条数 |
| groupId | String | 否 | 返利组ID |

#### 7.2.2 添加返利用户
```http
POST /apis/activity/rebate/user/add (agent_api)
```
**说明**：添加返利用户到组

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| userId | String | 是 | 用户ID |
| groupId | String | 是 | 返利组ID |

#### 7.2.3 修改返利用户
```http
POST /apis/activity/rebate/user/set (agent_api)
```
**说明**：修改返利用户

#### 7.2.4 删除返利用户
```http
POST /apis/activity/rebate/user/del (agent_api)
```
**说明**：删除返利用户

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | String | 是 | 记录ID |

#### 7.2.5 返利用户下拉
```http
POST /apis/user/agent/dim (agent_api)
```
**说明**：获取用户下拉数据

---

### 7.3 优惠券配置

#### 7.3.1 优惠券列表
```http
POST /apis/activity/config/coupon/store/goods/list (agent_api)
```
**说明**：获取商家商品优惠券配置

#### 7.3.2 添加优惠券
```http
POST /apis/activity/config/coupon/store/goods/add (agent_api)
```
**说明**：添加优惠券配置

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| storeId | String | 是 | 店铺ID |
| goodsId | String | 是 | 商品ID |
| couponId | String | 是 | 优惠券ID |

#### 7.3.3 修改优惠券
```http
POST /apis/activity/config/coupon/store/goods/set (agent_api)
```
**说明**：修改优惠券配置

---

## 八、系统模块 (System)

### 8.1 枚举接口

#### 8.1.1 系统枚举
```http
POST /apis/sys/enum (agent_api)
```
**说明**：获取系统枚举数据

**请求参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | String | 是 | 枚举类型 |

**响应示例**：
```json
{
  "code": 200,
  "data": {
    "deviceStatus": [
      { "value": "online", "label": "在线" },
      { "value": "offline", "label": "离线" },
      { "value": "fault", "label": "故障" }
    ],
    "orderStatus": [
      { "value": "pending", "label": "待支付" },
      { "value": "paid", "label": "已支付" },
      { "value": "completed", "label": "已完成" },
      { "value": "cancelled", "label": "已取消" }
    ]
  }
}
```

---

## 九、基础模块 (Base)

### 9.1 横幅接口

#### 9.1.1 获取横幅列表
```http
POST /apis/app/banner
```
**说明**：获取首页轮播图横幅

**响应示例**：
```json
{
  "code": 200,
  "data": [
    {
      "id": "1",
      "image": "https://xxx.com/banner1.png",
      "link": "/pages/index/home",
      "sort": 1
    },
    {
      "id": "2",
      "image": "https://xxx.com/banner2.png",
      "link": "/pages/activity/detail",
      "sort": 2
    }
  ]
}
```

---

## 十、公共组件

### 10.1 广告组件
```vue
<Ad :type=" 'popup' "></Ad>
```
**说明**：广告弹窗组件

**参数**：
| 参数 | 类型 | 说明 |
|------|------|------|
| type | String | 广告类型（popup/banner） |

### 10.2 微信登录组件
```vue
<WxLogin></WxLogin>
```
**说明**：微信登录组件，用于H5端微信授权登录

### 10.3 版权组件
```vue
<CopyRight></CopyRight>
```
**说明**：底部版权信息组件

---

## 附录

### A. 订单状态枚举

| 值 | 说明 |
|----|------|
| pending | 待支付 |
| paid | 已支付 |
| completed | 已完成 |
| cancelled | 已取消 |
| refunding | 退款中 |
| refunded | 已退款 |

### B. 设备状态枚举

| 值 | 说明 |
|----|------|
| online | 在线 |
| offline | 离线 |
| fault | 故障 |
| lack | 缺液 |
| lack_el | 缺电 |

### C. 支付方式

| 值 | 说明 |
|----|------|
| wechat | 微信支付 |
| alipay | 支付宝 |
| balance | 余额支付 |

### D. 用户角色

| 值 | 说明 |
|----|------|
| member | 普通会员 |
| agent | 代理商 |
| merchant | 商家 |
| salesman | 推销员 |
| staff | 业务员 |
| maintainer | 机主 |
| supplier | 供应链 |

---

**文档版本**: v1.0  
**最后更新**: 2024-01-01  
**维护者**: 技术部
